# 自动签到脚本

一个用于广东建设职业技术学院教务系统的自动签到脚本，可以自动完成学生的日常签到任务并通过邮件发送结果通知。

## 功能特性

- 🔐 自动获取会话ID和验证码
- 📝 自动完成教务系统登录
- 📍 自动执行签到操作
- 📧 签到结果邮件通知
- ⏰ 随机延迟执行（0-180秒）
- 🛡️ 模拟真实浏览器请求

## 环境要求

- Python 3.6+
- 网络连接
- 有效的教务系统账号

## 依赖安装

```bash
pip install requests beautifulsoup4
```

## 配置说明

### 1. 登录信息配置

在 `get_aspxauth` 函数中修改以下参数：

```python
data = {
    "yhm": "你的学号",      # 替换为实际学号
    "mm": "你的密码",       # 替换为实际密码
    "Nzm": r,
    "btnLogin": "登录"
}
```

### 2. 位置信息配置

在 `sign_in` 函数中修改位置信息：

```python
data = {
    'Xtcs': xtcs,
    'Xtu': '123456',           # 替换为实际学号
    'Xtdm': xtdm,
    'latitude': '230.160000',   # 纬度坐标
    'longitude': '153.230000',  # 经度坐标
    'sf': '省份',              # 实际省份
    'shi': '市',               # 实际城市
    'xian': '区',              # 实际区域
    'xxdz': '详细地址'         # 详细地址信息
}
```

### 3. 邮件配置

修改脚本底部的邮件配置：

```python
smtp_server = "smtp.example.com"           # SMTP服务器地址
smtp_port = 465                            # SMTP端口
smtp_user = "your_email@example.com"       # 发送方邮箱
smtp_pass = "your_email_password"          # 邮箱密码或授权码
recipient = "recipient_email@example.com"  # 接收方邮箱
```

## 使用方法

### 直接运行

```bash
python 完善最终版本.py
```

### 定时任务

使用系统定时任务（如cron）来定期执行：

```bash
# 每天上午8点执行签到
0 8 * * * /usr/bin/python3 /path/to/完善最终版本.py
```

## 工作流程

1. **获取会话ID** - 访问教务系统首页获取ASP.NET_SessionId
2. **获取验证码** - 通过特定接口获取验证码信息
3. **用户登录** - 使用学号密码完成系统登录
4. **提取参数** - 从签到页面提取必要的Xtcs和Xtdm参数
5. **执行签到** - 提交签到请求（包含位置信息）
6. **发送通知** - 通过邮件发送签到结果

## 安全提醒

⚠️ **重要提醒：**

- 请确保你的账号密码安全
- 建议使用邮箱授权码而非密码
- 定期更换密码
- 不要在公共环境运行此脚本

## 常见问题

### Q: 签到失败怎么办？
A: 检查网络连接、账号密码是否正确，以及教务系统是否正常运行。

### Q: 邮件发送失败？
A: 确认SMTP配置正确，检查邮箱是否开启了授权码功能。

### Q: 为什么有随机延迟？
A: 为了模拟人工操作，避免被系统识别为机器人。

### Q: 位置信息如何获取？
A: 可以通过地图应用获取准确的经纬度坐标。

## 注意事项

- 本脚本仅供学习交流使用
- 使用前请确保遵守学校相关规定
- 建议在测试环境中先行验证
- 如遇到问题请及时联系管理员

## 免责声明

此脚本仅用于技术学习和交流，使用者应当遵守学校规章制度。因使用本脚本而产生的任何问题，作者不承担任何责任。

---

*最后更新：2024年*
